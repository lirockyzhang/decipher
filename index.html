<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Codebreaker</title>
    <link rel="stylesheet" href="styles.css">
</head>
<body>
    <div class="container">
        <header>
            <h1>CODEBREAKER</h1>
            <div class="header-buttons">
                <button id="howToPlay" class="icon-btn" aria-label="How to play">?</button>
                <button id="settingsBtn" class="icon-btn" aria-label="Settings">⚙️</button>
                <button id="newGame" class="icon-btn" aria-label="New game">↻</button>
            </div>
        </header>

        <main>
            <div class="game-container">
                <div class="secret-code-container">
                    <div class="secret-code" id="secretCode">
                        <!-- This will be populated dynamically -->
                    </div>
                    <div class="moves-counter">
                        <span id="movesCount">0</span> / <span id="maxMoves">8</span> moves
                    </div>
                </div>

                <div class="game-board" id="gameBoard">
                    <!-- Active and previous guesses will appear here -->
                </div>

                <div class="color-palette" id="colorPalette">
                    <!-- This will be populated dynamically -->
                </div>

                <div class="action-buttons">
                    <button id="submitGuess" class="btn-submit" disabled>SUBMIT</button>
                    <!-- <button id="agentSuggest" class="btn-submit">AGENT SUGGESTION</button> -->
                </div>
            </div>

            <div class="message" id="message"></div>
        </main>
    </div>

    <!-- How to Play Modal -->
    <div id="modal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeModels">&times;</span>
            <h2>How to Play</h2>
            <div class="instructions">
                <p>The computer has generated a secret code of <span id="slotsCountDisplay">5</span> colors. Your goal is to guess the correct sequence.</p>

                <h3>Using Mouse:</h3>
                <ul>
                    <li>Click on a color from the palette</li>
                    <li>Click on an empty slot to place the color</li>
                    <li>Click "Submit Guess" when ready</li>
                </ul>

                <h3>Using Keyboard:</h3>
                <ul>
                    <li>Press <kbd>1-<span id="keyboardCountDisplay">5</span></kbd> to select colors</li>
                    <li>Press <kbd>Arrow Keys</kbd> to navigate between slots</li>
                    <li>Press <kbd>Enter</kbd> to submit your guess</li>
                    <li>Press <kbd>H</kbd> to show help</li>
                    <li>Press <kbd>Backspace</kbd> to clear current slot</li>
                </ul>

                <h3>Feedback:</h3>
                <ul>
                    <li><span class="feedback-dot" style="background: #22c55e;"></span> <strong>Green dot:</strong> Correct color in correct position</li>
                    <li><span class="feedback-dot" style="background: #fbbf24;"></span> <strong>Yellow dot:</strong> Correct color in wrong position</li>
                    <li><span class="feedback-dot" style="background: #6b7280;"></span> <strong>Gray dot:</strong> Color not in code</li>
                </ul>
            </div>
        </div>
    </div>

    <!-- Settings Modal -->
    <div id="settingsModal" class="modal">
        <div class="modal-content">
            <span class="close" id="closeSettings">&times;</span>
            <h2>Game Settings</h2>
            <div class="settings-form">
                <div class="setting-row">
                    <label for="numColors">Number of Colors (4-10):</label>
                    <input type="number" id="numColors" min="4" max="10" value="5">
                </div>
                <div class="setting-row">
                    <label for="numSlots">Number of Slots (3-8):</label>
                    <input type="number" id="numSlots" min="3" max="8" value="5">
                </div>
                <div class="setting-row">
                    <label for="maxAttempts">Max Attempts (5-15):</label>
                    <input type="number" id="maxAttempts" min="5" max="15" value="8">
                </div>
                <button id="applySettings">Apply Settings</button>
            </div>
        </div>
    </div>

    <!-- Load the agent architecture -->
    <script src="game_core.js"></script>
    <script src="agent/agent_interface.js"></script>
    <script src="agent/entropy_agent.js"></script>
    <script src="agent/human_agent.js"></script>
    <script src="agent/q_learning_agent.js"></script>
    <script src="game_controller.js"></script>
    <script src="ui_handler.js"></script>
    <script src="game.js"></script>
</body>
</html>